<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Albion Online Hellgate</title>
    <meta name="description" content="Monitor and track Albion Online's Hellgate content for updates and statistics.">
    <meta name="keywords" content="Albion Online, Hellgate, monitoring, updates, statistics">
    <meta name="author" content="">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <style>
        h1, h2 {
            color: white; /* 흰색으로 글자색 변경 */
            text-align: center; /* 가운데 정렬 */
            margin-top: 50px; /* 위쪽 여백 추가 */
        }

        body {
            background-color: black; /* 배경색을 검은색으로 설정 */
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 0 10px;
            text-decoration: none;
            color: white;
            background-color: darkblue;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .btn:hover {
            background-color: deepskyblue;
        }
    </style>
</head>
<body>
<div>
    <h1><span style="color:red;">EAST</span> Server Albion Hellgate Monitor</h1>
    <h2>Select Match Type</h2>
    <div class="button-container">
        <a href="/match/duo" class="btn">2v2 Match</a>
        <a href="/match/five" class="btn">5v5 Match</a>
        <a href="/match/ten" class="btn">10v10 Match</a>
    </div>


    <h2>Search User Name</h2>
    <div class="button-container">
        <form id="searchForm" action="/search/User" method="post">
            <label for="user_name">user name : </label>
            <input type="text" id="user_name" name="user_name" placeholder="user name"> <input type="submit"
                                                                                               value="Search">
        </form>
    </div>

    <div style="text-align: center;">
        <div id="search_result" style="display: inline-block;">
            <!-- 표가 여기에 나타날 것입니다 -->
        </div>
    </div>
</div>

</body>

<script>
    document.getElementById('searchForm').addEventListener('submit', function (event) {
        event.preventDefault(); // 폼 제출 방지
        const userName = document.getElementById('user_name').value; // 사용자명 값 가져오기

        fetch('/search/User', {
            method: 'POST',
            body: JSON.stringify({user_name: userName}),
            headers: {
                'Content-Type': 'application/json'
            }
        }).then(response => response.json())
            .then(data => {
                console.log(data);

                const searchResultElement = document.getElementById('search_result');

                if (data) {
                    let resultHTML =
                        `<h2>Search : ${data.user_name}</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Match Type</th>
                                    <th>Win</th>
                                    <th>Lose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2v2</td>
                                    <td>${data.duo.win}</td>
                                    <td>${data.duo.lose}</td>
                                </tr>
                                <tr>
                                    <td>5v5</td>
                                    <td>${data.five.win}</td>
                                    <td>${data.five.lose}</td>
                                </tr>
                                <tr>
                                    <td>10v10</td>
                                    <td>${data.ten.win}</td>
                                    <td>${data.ten.lose}</td>
                                </tr>
                            </tbody>
                        </table>`;

                    resultHTML += `<a href="/search/User/MatchLog/${data.user_name}" class="btn">detail</a>`

                    // 결과를 요소에 추가
                    searchResultElement.innerHTML = resultHTML;
                } else {
                    // 데이터가 없을 경우 예외 처리
                    searchResultElement.innerHTML = '<p>No result found</p>';
                }
            }).catch(error => {
            console.error("Error : ", error);
        });
    });
</script>

</html>
